[tools]
node = "lts"
pnpm = "latest"

[env]
_.path = ['{{config_root}}/node_modules/.bin']

[tasks.dev]
description = "Run the development server"
run = "vite dev --host"

[tasks.build]
description = "Build the app"
sources = [
  "../../pnpm-lock.yaml",
  "nitro.config.ts",
  "vite.config.ts",
  "tsconfig.json",
  "entry.server.ts",
  "app/**/*.{ts,tsx,css}",
]
outputs = [".output"]
run = "vite build"

[tasks.preview]
description = "Preview the built application"
depends = "build"
run = "vite preview"

[tasks.fmt]
description = "Format the entire project"
run = "biome format --write ."

[tasks.lint]
description = "Lint the entire project"
run = "biome lint --write --unsafe --assist-enabled=true ."

[tasks.fix]
description = "Format and lint the entire project"
depends = ["fmt", "lint"]

[tasks.typecheck]
description = "Typecheck the entire project"
sources = ["app/**/*.{ts,tsx}"]
# depends = "generate-*"
run = "tsgo --noEmit"
